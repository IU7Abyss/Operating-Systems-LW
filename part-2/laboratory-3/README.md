# Файловая система /proc

*Начальная концепция:* средство предоставления информации о выполняющихся процеесах

`/proc` содержит:
* директории для структурирования информации
* виртуальные файлы

*Виртуальные файлы:* средство передачи информаци из _kernel_ (в _kernel_).

```bash
$ ls /proc
```

* файл с номерным именем: директория, содержащая информацию о выполняющимся процессе;

* `cpuinfo`: информация о типе и производительности ЦП;

* `pci`: устройства на шине PCI;

* `modules`: модули загруженные в ядро.


# Загружаемый модуль ядра (LKM)

*Проблема:* ограичение по памяти => необходимо компактное ядро => нужно убрать код, который не используется постоянно => необходим некоторый механизи.

*Решение:* LKM

*Пример:* Драйверы для подключаемых устройств

*LKM* позволяет динамически добавлять (удалять) код из _kernel_. LKM - удобное средство реалиизации драйверов и файловых систем.

Пример простого LKM разобран в папке `example`


```c
#include <linux/module.h>


/* Лицензия, иначе будет kernel panic*/
MODULE_LICENSE("GPL");


/* Init-функция, вызываемая при загрузке модуля */
int
my_module_init(void) {
	printk(KERN_INFO "my_module_init called.  Module is now loaded.\n");
	
	return 0;
}

/* Cleanup-функция, вызываемая при выгрузке модуля */
void
my_module_cleanup(void) {
	printk(KERN_INFO "my_module_cleanup called.  Module is now unloaded.\n");
	
	return;
}


/* Ядру сообщаются названия функций, вызываемых при загрузке и выгрузке модуля */
module_init(my_module_init);
module_exit(my_module_cleanup);
```